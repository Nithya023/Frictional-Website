<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JJMMS2GB9S"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JJMMS2GB9S');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purchase Your Book</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Vibrant gradient background: Lavender Mist to Soft Sky Blue */
            background: linear-gradient(135deg, #E6E6FA, #87CEFA);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            color: #333333; /* Charcoal Gray text */
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #BA55D3; /* Highlight color for scrollbar */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6A0DAD; /* Deep Purple on hover */
        }
    </style>
</head>
<body class="text-[#333333]">
    <div class="max-w-md mx-auto bg-white p-8 md:p-10 rounded-2xl shadow-2xl transform transition-all duration-300 hover:scale-105">
        <h1 class="text-3xl md:text-4xl font-extrabold text-center mb-8 text-[#6A0DAD]"> <!-- Deep Purple for heading -->
            Complete Your Purchase
        </h1>

        <!-- Purchase Form Section -->
        <div id="purchaseForm">
            <div class="mb-4">
                <label for="bookTitle" class="block text-[#333333] text-sm font-bold mb-2">Book Title</label>
                <input type="text" id="bookTitle" class="shadow appearance-none border border-[#FFC0CB] rounded-lg w-full py-3 px-4 text-[#333333] leading-tight focus:outline-none focus:ring-2 focus:ring-[#BA55D3] focus:border-transparent" readonly>
            </div>
            <div class="mb-4">
                <label for="name" class="block text-[#333333] text-sm font-bold mb-2">Your Name</label>
                <input type="text" id="name" class="shadow appearance-none border border-[#FFC0CB] rounded-lg w-full py-3 px-4 text-[#333333] leading-tight focus:outline-none focus:ring-2 focus:ring-[#BA55D3] focus:border-transparent" placeholder="John Doe" required>
            </div>
            <div class="mb-4">
                <label for="email" class="block text-[#333333] text-sm font-bold mb-2">Email Address</label>
                <input type="email" id="email" class="shadow appearance-none border border-[#FFC0CB] rounded-lg w-full py-3 px-4 text-[#333333] leading-tight focus:outline-none focus:ring-2 focus:ring-[#BA55D3] focus:border-transparent" placeholder="john.doe@example.com" required>
            </div>
            <div class="mb-6">
                <label for="phone" class="block text-[#333333] text-sm font-bold mb-2">Phone Number</label>
                <input type="tel" id="phone" class="shadow appearance-none border border-[#FFC0CB] rounded-lg w-full py-3 px-4 text-[#333333] leading-tight focus:outline-none focus:ring-2 focus:ring-[#BA55D3] focus:border-transparent" placeholder="+91 9876543210" required>
            </div>
            <button id="proceedToPayBtn" class="w-full bg-[#BA55D3] hover:bg-[#6A0DAD] text-white font-bold py-3 px-6 rounded-full shadow-lg transform transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-[#FFC0CB]"> <!-- Medium Orchid Purple for button, Pastel Pink for ring -->
                Proceed to Pay
            </button>
        </div>

        <!-- Payment Mode Selection Section -->
        <div id="paymentModes" class="hidden text-center">
            <h2 class="text-2xl font-bold text-[#6A0DAD] mb-6">Choose Payment Mode</h2> <!-- Deep Purple for heading -->
            <div class="space-y-4">
                <button id="gpayBtn" class="w-full bg-[#BA55D3] hover:bg-[#6A0DAD] text-white font-bold py-4 px-6 rounded-xl shadow-lg transform transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-[#FFC0CB]"> <!-- Medium Orchid Purple for button -->
                    Pay with GPay
                </button>
                <button id="phonepayBtn" class="w-full bg-[#BA55D3] hover:bg-[#6A0DAD] text-white font-bold py-4 px-6 rounded-xl shadow-lg transform transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-[#FFC0CB]"> <!-- Medium Orchid Purple for button -->
                    Pay with PhonePe
                </button>
            </div>
        </div>

        <!-- Payment Success Section -->
        <div id="paymentSuccess" class="hidden text-center">
            <h2 class="text-3xl font-bold text-[#BA55D3] mb-6">Payment Successful!</h2> <!-- Medium Orchid Purple for heading -->
            <p class="text-lg text-[#333333] mb-8">
                Congratulations! Your payment has been successfully processed.
            </p>
            <p class="text-xl font-semibold text-[#6A0DAD]"> <!-- Deep Purple for text -->
                You can now enjoy reading <span id="successBookTitle" class="font-extrabold text-[#BA55D3]"></span>! <!-- Medium Orchid Purple for book title -->
            </p>
            <a href="index.html" class="inline-block mt-8 bg-[#87CEFA] hover:bg-[#6A0DAD] text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-[#FFC0CB]"> <!-- Soft Sky Blue for button, Pastel Pink for ring -->
                Back to Home
            </a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const bookTitleInput = document.getElementById('bookTitle');
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            const phoneInput = document.getElementById('phone');
            const proceedToPayBtn = document.getElementById('proceedToPayBtn');
            const purchaseForm = document.getElementById('purchaseForm');
            const paymentModes = document.getElementById('paymentModes');
            const gpayBtn = document.getElementById('gpayBtn');
            const phonepayBtn = document.getElementById('phonepayBtn');
            const paymentSuccess = document.getElementById('paymentSuccess');
            const successBookTitle = document.getElementById('successBookTitle');

            // Function to get URL parameters
            const getUrlParameter = (name) => {
                name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
                const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
                const results = regex.exec(location.search);
                return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
            };

            // Pre-fill book title from URL parameter
            const bookName = getUrlParameter('book');
            if (bookName) {
                bookTitleInput.value = bookName;
            } else {
                bookTitleInput.value = "Unknown Book"; // Fallback if no book is specified
            }

            // Handle "Proceed to Pay" button click
            proceedToPayBtn.addEventListener('click', () => {
                // Basic validation
                if (nameInput.value.trim() === '' || emailInput.value.trim() === '' || phoneInput.value.trim() === '') {
                    // Visually indicate missing fields by adding a red border
                    nameInput.classList.toggle('border-red-500', nameInput.value.trim() === '');
                    emailInput.classList.toggle('border-red-500', emailInput.value.trim() === '');
                    phoneInput.classList.toggle('border-red-500', phoneInput.value.trim() === '');
                    console.log("Please fill in all required fields."); // Log to console for debugging
                    return;
                }

                // Hide purchase form and show payment modes
                purchaseForm.classList.add('hidden');
                paymentModes.classList.remove('hidden');
            });

            // Handle GPay or PhonePe button click
            const handlePaymentClick = (mode) => {
                // Simulate payment processing
                console.log(`Simulating payment via ${mode}...`);

                // Hide payment modes and show success message
                paymentModes.classList.add('hidden');
                paymentSuccess.classList.remove('hidden');
                successBookTitle.textContent = bookTitleInput.value; // Display purchased book title
            };

            gpayBtn.addEventListener('click', () => handlePaymentClick('GPay'));
            phonepayBtn.addEventListener('click', () => handlePaymentClick('PhonePe'));
        });
    </script>
</body>
</html>
